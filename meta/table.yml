Resources:
  DataTable:
    Type: AWS::DynamoDB::Table
    Properties:
      AttributeDefinitions:
        - AttributeName: PK
          AttributeType: S
        - AttributeName: SK
          AttributeType: S
        - AttributeName: GSI1PK
          AttributeType: S
        - AttributeName: GSI1SK
          AttributeType: S
      KeySchema:
        - AttributeName: PK
          KeyType: HASH
        - AttributeName: SK
          KeyType: RANGE
      GlobalSecondaryIndexes:
        - IndexName: GSI1
          KeySchema:
          - AttributeName: GSI1PK
            KeyType: HASH
          - AttributeName: GSI1SK
            KeyType: RANGE
          Projection: 
            ProjectionType: ALL
      BillingMode: PAY_PER_REQUEST
      PointInTimeRecoverySpecification:
        PointInTimeRecoveryEnabled: true
      TableName:
        Fn::Join:
          - ""
          - - Fn::Sub: ${self:provider.projectName}
            - Fn::Sub: ${self:provider.stage}
            - DataTable
      StreamSpecification:
        StreamViewType: NEW_AND_OLD_IMAGES

Outputs:
  DataTableARN:
    Description: Arn for Data Table
    Value: !Sub ${DataTable.StreamArn}